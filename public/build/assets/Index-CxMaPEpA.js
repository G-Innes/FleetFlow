import{x as k,u as O,j as R,g as l,o as r,a as d,d as a,h as Y,w as u,b as e,i as c,k as S,F as D,p as F,t as i,y as L,v as q,n as M,q as G,f as _,l as T,s as V}from"./app-DrpLThnM.js";import{_ as X}from"./AuthenticatedLayout-CpQn2g7T.js";import{_ as J}from"./Modal-B4g-cQIw.js";const K={class:"flex items-center justify-between"},Q={class:"flex space-x-3"},W={class:"py-8"},Z={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},ee={class:"bg-fleet-darker border border-fleet-accent/20 rounded-xl p-6 mb-8"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},se=["value"],oe={class:"flex items-end"},le={class:"flex items-center space-x-2 cursor-pointer"},re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"bg-fleet-darker border border-fleet-accent/20 rounded-xl p-6 hover:border-fleet-accent/40 transition-all duration-300 glow-follow group"},ae={class:"flex items-start justify-between mb-4"},ie={class:"flex-1"},de={class:"text-lg font-semibold text-fleet-text group-hover:text-fleet-accent transition-colors"},ue={key:0,class:"text-fleet-text-muted text-sm mt-1 line-clamp-2"},ce={class:"flex items-center space-x-2 ml-4"},fe=["onClick"],xe={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},me={class:"space-y-3"},pe={key:0,class:"flex items-center space-x-2"},ge={class:"text-fleet-text-muted text-sm"},ve={key:1,class:"flex items-center space-x-2"},be={key:0,class:"ml-1"},he={key:1,class:"ml-1"},ye={class:"flex items-center space-x-2"},we={class:"text-fleet-text-muted text-sm"},ke={class:"mt-6 flex items-center justify-between"},_e={class:"flex space-x-2"},Ce=["onClick"],Se={class:"text-xs text-fleet-text-muted"},De={key:0,class:"text-center py-12"},Me={key:1,class:"mt-8 flex justify-center"},Te={class:"flex space-x-2"},Ve=["onClick","disabled","innerHTML"],je={class:"bg-fleet-darker border border-fleet-accent/20 px-6 py-6"},Fe={class:"mt-6 flex justify-end space-x-3"},Le=["disabled"],Ue={__name:"Index",props:{tasks:Object,categories:Array,filters:Object},setup(g){const v=g,f=k(v.filters.category||""),x=k(v.filters.status||""),m=k(v.filters.priority||""),b=k(!!v.filters.due_soon||!1),h=k(!1),p=O({csv_file:null}),B=o=>{const t=o.target.files;t&&t[0]&&(p.csv_file=t[0])},P=()=>{p.csv_file&&p.post(route("tasks.import"),{preserveScroll:!0,onSuccess:()=>{h.value=!1,p.reset("csv_file")}})},$=R(()=>v.tasks.data),U=o=>{switch(o){case 3:return"text-fleet-danger border-fleet-danger bg-fleet-danger/10";case 2:return"text-fleet-warning border-fleet-warning bg-fleet-warning/10";case 1:return"text-fleet-success border-fleet-success bg-fleet-success/10";default:return"text-fleet-text-muted border-fleet-text-muted bg-fleet-text-muted/10"}},I=o=>{switch(o){case 3:return"High";case 2:return"Medium";case 1:return"Low";default:return"Unknown"}},N=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"No due date",j=o=>{if(!o)return!1;const n=new Date(o)-new Date,w=Math.ceil(n/(1e3*60*60*24));return w<=3&&w>=0},C=o=>o?new Date(o)<new Date:!1,H=o=>{V.patch(route("tasks.toggle",o.id),{},{preserveState:!0,preserveScroll:!0})},y=()=>{V.get(route("tasks.index"),{category:f.value,status:x.value,priority:m.value,due_soon:b.value},{preserveState:!0,replace:!0})},z=()=>{f.value="",x.value="",m.value="",b.value=!1,y()},A=()=>{const o=new URLSearchParams;f.value&&o.set("category",f.value),x.value&&o.set("status",x.value),m.value&&o.set("priority",m.value),b.value&&o.set("due_soon","1"),window.location.href=route("tasks.export")+(o.toString()?`?${o.toString()}`:"")},E=o=>{if(!o)return;let t=o;try{const s=new URL(o,window.location.origin);t=s.pathname+s.search}catch{}V.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0})};return(o,t)=>(r(),l(D,null,[d(a(Y),{title:"Tasks"}),d(X,null,{header:u(()=>[e("div",K,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-bold text-fleet-text"},"Task Management"),e("p",{class:"text-fleet-text-muted mt-1"},"Manage your fleet operations tasks")],-1)),e("div",Q,[e("button",{type:"button",onClick:t[0]||(t[0]=s=>h.value=!0),class:"bg-fleet-darker border border-fleet-accent/20 hover:border-fleet-accent/40 text-fleet-text px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-fleet-accent/10"}," Import CSV "),e("button",{onClick:A,class:"bg-fleet-darker border border-fleet-accent/20 hover:border-fleet-accent/40 text-fleet-text px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-fleet-accent/10"}," Export CSV "),d(a(T),{href:o.route("tasks.create"),class:"bg-fleet-accent hover:bg-fleet-accent-light text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:shadow-lg hover:shadow-fleet-accent/25"},{default:u(()=>[...t[8]||(t[8]=[_(" + New Task ",-1)])]),_:1},8,["href"])])])]),default:u(()=>[e("div",W,[e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Category",-1)),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:y},[t[10]||(t[10]=e("option",{value:""},"All Categories",-1)),(r(!0),l(D,null,F(g.categories,s=>(r(),l("option",{key:s.id,value:s.id},i(s.name),9,se))),128))],544),[[L,f.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Status",-1)),S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:y},[...t[12]||(t[12]=[e("option",{value:""},"All Tasks",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1)])],544),[[L,x.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Priority",-1)),S(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:y},[...t[14]||(t[14]=[e("option",{value:""},"All",-1),e("option",{value:"3"},"High",-1),e("option",{value:"2"},"Medium",-1),e("option",{value:"1"},"Low",-1)])],544),[[L,m.value]])]),e("div",oe,[e("label",le,[S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>b.value=s),type:"checkbox",class:"w-4 h-4 text-fleet-accent bg-fleet-dark border-fleet-accent/20 rounded focus:ring-fleet-accent/20 focus:ring-2",onChange:y},null,544),[[q,b.value]]),t[16]||(t[16]=e("span",{class:"text-sm font-medium text-fleet-text"},"Due Soon",-1))])])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:z,class:"text-fleet-accent hover:text-fleet-accent-light text-sm font-medium transition-colors"}," Clear Filters ")])]),e("div",re,[(r(!0),l(D,null,F($.value,s=>(r(),l("div",{class:"glow-wrap",onMousemove:t[5]||(t[5]=n=>{const w=n.currentTarget.getBoundingClientRect();n.currentTarget.style.setProperty("--gx",`${n.clientX-w.left}px`),n.currentTarget.style.setProperty("--gy",`${n.clientY-w.top}px`)}),key:s.id},[e("div",ne,[e("div",ae,[e("div",ie,[e("h3",de,i(s.title),1),s.description?(r(),l("p",ue,i(s.description),1)):c("",!0)]),e("div",ce,[e("span",{class:M([U(s.priority),"px-2 py-1 rounded-full text-xs font-medium border"])},i(I(s.priority)),3),e("button",{onClick:n=>H(s),class:M([s.is_completed?"bg-fleet-success":"bg-fleet-dark border border-fleet-accent/20","w-6 h-6 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110"])},[s.is_completed?(r(),l("svg",xe,[...t[17]||(t[17]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):c("",!0)],10,fe)])]),e("div",me,[s.category?(r(),l("div",pe,[e("div",{class:"w-3 h-3 rounded-full",style:G({backgroundColor:s.category.color})},null,4),e("span",ge,i(s.category.name),1)])):c("",!0),s.due_date?(r(),l("div",ve,[t[18]||(t[18]=e("svg",{class:"w-4 h-4 text-fleet-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",{class:M([{"text-fleet-danger":C(s.due_date),"text-fleet-warning":j(s.due_date)&&!C(s.due_date),"text-fleet-text-muted":!j(s.due_date)&&!C(s.due_date)},"text-sm font-medium"])},[_(i(N(s.due_date))+" ",1),C(s.due_date)?(r(),l("span",be,"(Overdue)")):j(s.due_date)?(r(),l("span",he,"(Due Soon)")):c("",!0)],2)])):c("",!0),e("div",ye,[t[19]||(t[19]=e("svg",{class:"w-4 h-4 text-fleet-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",we," Created "+i(new Date(s.created_at).toLocaleDateString()),1)])]),e("div",ke,[e("div",_e,[d(a(T),{href:o.route("tasks.show",s.id),class:"text-fleet-success hover:text-fleet-success/80 text-sm font-medium transition-colors"},{default:u(()=>[...t[20]||(t[20]=[_(" View ",-1)])]),_:1},8,["href"]),d(a(T),{href:o.route("tasks.edit",s.id),class:"text-fleet-accent hover:text-fleet-accent-light text-sm font-medium transition-colors"},{default:u(()=>[...t[21]||(t[21]=[_(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:n=>a(V).delete(o.route("tasks.destroy",s.id),{onBefore:()=>o.confirm("Are you sure you want to delete this task?")}),class:"text-fleet-danger hover:text-red-400 text-sm font-medium transition-colors"}," Delete ",8,Ce)]),e("div",Se," ID: "+i(s.id),1)])])],32))),128))]),$.value.length===0?(r(),l("div",De,[t[23]||(t[23]=e("div",{class:"w-24 h-24 bg-fleet-accent/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-12 h-12 text-fleet-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),t[24]||(t[24]=e("h3",{class:"text-xl font-semibold text-fleet-text mb-2"},"No tasks found",-1)),t[25]||(t[25]=e("p",{class:"text-fleet-text-muted mb-6"},"Get started by creating your first task.",-1)),d(a(T),{href:o.route("tasks.create"),class:"bg-fleet-accent hover:bg-fleet-accent-light text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:shadow-lg hover:shadow-fleet-accent/25"},{default:u(()=>[...t[22]||(t[22]=[_(" Create Your First Task ",-1)])]),_:1},8,["href"])])):c("",!0),g.tasks.links&&g.tasks.links.length>3?(r(),l("div",Me,[e("nav",Te,[(r(!0),l(D,null,F(g.tasks.links,s=>(r(),l("button",{key:s.label,onClick:n=>E(s.url),disabled:!s.url,innerHTML:s.label,class:M([{"bg-fleet-accent text-white":s.active,"bg-fleet-darker text-fleet-text hover:bg-fleet-accent/10":!s.active,"pointer-events-none opacity-50":!s.url},"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200"])},null,10,Ve))),128))])])):c("",!0)])])]),_:1}),d(J,{show:h.value,onClose:t[7]||(t[7]=s=>h.value=!1)},{default:u(()=>[e("div",je,[t[26]||(t[26]=e("h3",{class:"text-xl font-semibold text-fleet-text mb-4"},"Import Tasks (CSV)",-1)),t[27]||(t[27]=e("p",{class:"text-fleet-text-muted text-sm mb-4"},"Upload a CSV with headers: Title, Description, Category, Due Date, Status, Priority.",-1)),e("input",{type:"file",accept:".csv,text/csv",onChange:B,class:"w-full text-fleet-text"},null,32),e("div",Fe,[e("button",{onClick:t[6]||(t[6]=s=>h.value=!1),class:"px-4 py-2 bg-fleet-darker border border-fleet-accent/20 text-fleet-text rounded-lg hover:opacity-90"},"Cancel"),e("button",{onClick:P,disabled:a(p).processing||!a(p).csv_file,class:"px-4 py-2 bg-fleet-gradient text-white rounded-lg hover:opacity-90 disabled:opacity-50"},"Import",8,Le)])])]),_:1},8,["show"])],64))}};export{Ue as default};
