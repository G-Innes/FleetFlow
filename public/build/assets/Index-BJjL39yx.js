import{x as _,u as Y,j as q,g as l,o as r,a as d,d as u,h as G,w as c,b as t,i as f,k as D,F as T,p as L,t as i,y as $,v as X,n as M,q as J,f as C,l as V,s as j}from"./app-dMbshTQx.js";import{_ as K}from"./AuthenticatedLayout-CWuyuHpc.js";import{_ as Q}from"./Modal-ByD_pj0r.js";const W={class:"flex items-center justify-between"},Z={class:"flex space-x-2 sm:space-x-3"},ee={class:"py-8"},te={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},se={class:"bg-fleet-darker border border-fleet-accent/20 rounded-xl p-6 mb-8"},oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},le=["value"],re={class:"flex items-end"},ne={class:"flex items-center space-x-2 cursor-pointer"},ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ie={class:"bg-fleet-darker border border-fleet-accent/20 rounded-xl p-6 hover:border-fleet-accent/40 transition-all duration-300 glow-follow group"},de={class:"flex items-start justify-between mb-4"},ue={class:"flex-1"},ce={class:"text-lg font-semibold text-fleet-text group-hover:text-fleet-accent transition-colors"},fe={key:0,class:"text-fleet-text-muted text-sm mt-1 line-clamp-2"},xe={class:"flex items-center space-x-2 ml-4"},me=["onClick"],pe={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},ge={class:"space-y-3"},ve={key:0,class:"flex items-center space-x-2"},be={class:"text-fleet-text-muted text-sm"},he={key:1,class:"flex items-center space-x-2"},ye={key:0,class:"ml-1"},we={key:1,class:"ml-1"},ke={class:"flex items-center space-x-2"},_e={class:"text-fleet-text-muted text-sm"},Ce={class:"mt-6 flex items-center justify-between"},Se={class:"flex space-x-2"},De=["onClick"],Te={class:"text-xs text-fleet-text-muted"},Me={key:0,class:"text-center py-12"},Ve={key:1,class:"mt-8 flex justify-center"},je={class:"flex space-x-2"},Fe=["onClick","disabled","innerHTML"],Le={class:"bg-fleet-darker border border-fleet-accent/20 px-6 py-6"},$e={class:"mt-6 flex justify-end space-x-3"},Ue=["disabled"],Ne={__name:"Index",props:{tasks:Object,categories:Array,filters:Object},setup(v){const b=v,x=_(b.filters.category||""),m=_(b.filters.status||""),p=_(b.filters.priority||""),h=_(!!b.filters.due_soon||!1),y=_(!1),g=Y({csv_file:null}),B=o=>{const e=o.target.files;e&&e[0]&&(g.csv_file=e[0])},P=()=>{g.csv_file&&g.post(route("tasks.import"),{preserveScroll:!0,onSuccess:()=>{y.value=!1,g.reset("csv_file")}})},U=q(()=>b.tasks.data),I=o=>{switch(o){case 3:return"text-fleet-danger border-fleet-danger bg-fleet-danger/10";case 2:return"text-fleet-warning border-fleet-warning bg-fleet-warning/10";case 1:return"text-fleet-success border-fleet-success bg-fleet-success/10";default:return"text-fleet-text-muted border-fleet-text-muted bg-fleet-text-muted/10"}},N=o=>{switch(o){case 3:return"High";case 2:return"Medium";case 1:return"Low";default:return"Unknown"}},H=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"No due date",F=o=>{if(!o)return!1;const n=new Date(o)-new Date,k=Math.ceil(n/(1e3*60*60*24));return k<=3&&k>=0},S=o=>o?new Date(o)<new Date:!1,a=o=>{try{const e=new URL(o,window.location.origin);return e.pathname+e.search}catch{return o}},z=o=>{if(!o)return;let e=o;try{const s=new URL(o,window.location.origin);e=s.pathname+s.search}catch{}j.get(e,{},{preserveState:!0,preserveScroll:!0,replace:!0})},A=o=>{const e=a(route("tasks.toggle",o.id));j.patch(e,{},{preserveState:!0,preserveScroll:!0})},w=()=>{j.get(a(route("tasks.index")),{category:x.value,status:m.value,priority:p.value,due_soon:h.value},{preserveState:!0,replace:!0})},R=()=>{x.value="",m.value="",p.value="",h.value=!1,w()},E=()=>{const o=new URLSearchParams;x.value&&o.set("category",x.value),m.value&&o.set("status",m.value),p.value&&o.set("priority",p.value),h.value&&o.set("due_soon","1");const e=a(route("tasks.export"));window.location.href=e+(o.toString()?`?${o.toString()}`:"")},O=o=>{if(!confirm("Are you sure you want to delete this task?"))return;const e=a(route("tasks.destroy",o.id));j.delete(e,{},{preserveState:!0,preserveScroll:!0,replace:!0})};return(o,e)=>(r(),l(T,null,[d(u(G),{title:"Tasks"}),d(K,null,{header:c(()=>[t("div",W,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-fleet-text"},"Task Management"),t("p",{class:"text-fleet-text-muted mt-1"},"Manage your fleet operations tasks")],-1)),t("div",Z,[t("button",{type:"button",onClick:e[0]||(e[0]=s=>y.value=!0),class:"bg-fleet-darker border border-fleet-accent/20 hover:border-fleet-accent/40 text-fleet-text px-2.5 py-1 text-xs sm:px-4 sm:py-2 sm:text-base rounded-lg font-medium transition-all duration-200 hover:bg-fleet-accent/10"}," Import CSV "),t("button",{onClick:E,class:"bg-fleet-darker border border-fleet-accent/20 hover:border-fleet-accent/40 text-fleet-text px-2.5 py-1 text-xs sm:px-4 sm:py-2 sm:text-base rounded-lg font-medium transition-all duration-200 hover:bg-fleet-accent/10"}," Export CSV "),d(u(V),{href:a(o.route("tasks.create")),class:"bg-fleet-accent hover:bg-fleet-accent-light text-white px-3 py-1.5 text-xs sm:px-6 sm:py-3 sm:text-base rounded-lg font-medium transition-all duration-200 hover:shadow-lg hover:shadow-fleet-accent/25"},{default:c(()=>[...e[8]||(e[8]=[C(" + New Task ",-1)])]),_:1},8,["href"])])])]),default:c(()=>[t("div",ee,[t("div",te,[t("div",se,[t("div",oe,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Category",-1)),D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:w},[e[10]||(e[10]=t("option",{value:""},"All Categories",-1)),(r(!0),l(T,null,L(v.categories,s=>(r(),l("option",{key:s.id,value:s.id},i(s.name),9,le))),128))],544),[[$,x.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Status",-1)),D(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:w},[...e[12]||(e[12]=[t("option",{value:""},"All Tasks",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"completed"},"Completed",-1)])],544),[[$,m.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-fleet-text mb-2"},"Priority",-1)),D(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),class:"w-full px-4 py-2 bg-fleet-dark border border-fleet-accent/20 rounded-lg text-fleet-text focus:border-fleet-accent focus:ring-2 focus:ring-fleet-accent/20 focus:outline-none transition-all duration-200",onChange:w},[...e[14]||(e[14]=[t("option",{value:""},"All",-1),t("option",{value:"3"},"High",-1),t("option",{value:"2"},"Medium",-1),t("option",{value:"1"},"Low",-1)])],544),[[$,p.value]])]),t("div",re,[t("label",ne,[D(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s),type:"checkbox",class:"w-4 h-4 text-fleet-accent bg-fleet-dark border-fleet-accent/20 rounded focus:ring-fleet-accent/20 focus:ring-2",onChange:w},null,544),[[X,h.value]]),e[16]||(e[16]=t("span",{class:"text-sm font-medium text-fleet-text"},"Due Soon",-1))])])]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:R,class:"text-fleet-accent hover:text-fleet-accent-light text-sm font-medium transition-colors"}," Clear Filters ")])]),t("div",ae,[(r(!0),l(T,null,L(U.value,s=>(r(),l("div",{class:"glow-wrap",onMousemove:e[5]||(e[5]=n=>{const k=n.currentTarget.getBoundingClientRect();n.currentTarget.style.setProperty("--gx",`${n.clientX-k.left}px`),n.currentTarget.style.setProperty("--gy",`${n.clientY-k.top}px`)}),key:s.id},[t("div",ie,[t("div",de,[t("div",ue,[t("h3",ce,i(s.title),1),s.description?(r(),l("p",fe,i(s.description),1)):f("",!0)]),t("div",xe,[t("span",{class:M([I(s.priority),"px-2 py-1 rounded-full text-xs font-medium border"])},i(N(s.priority)),3),t("button",{onClick:n=>A(s),class:M([s.is_completed?"bg-fleet-success":"bg-fleet-dark border border-fleet-accent/20","w-6 h-6 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110"])},[s.is_completed?(r(),l("svg",pe,[...e[17]||(e[17]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):f("",!0)],10,me)])]),t("div",ge,[s.category?(r(),l("div",ve,[t("div",{class:"w-3 h-3 rounded-full",style:J({backgroundColor:s.category.color})},null,4),t("span",be,i(s.category.name),1)])):f("",!0),s.due_date?(r(),l("div",he,[e[18]||(e[18]=t("svg",{class:"w-4 h-4 text-fleet-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",{class:M([{"text-fleet-danger":S(s.due_date),"text-fleet-warning":F(s.due_date)&&!S(s.due_date),"text-fleet-text-muted":!F(s.due_date)&&!S(s.due_date)},"text-sm font-medium"])},[C(i(H(s.due_date))+" ",1),S(s.due_date)?(r(),l("span",ye,"(Overdue)")):F(s.due_date)?(r(),l("span",we,"(Due Soon)")):f("",!0)],2)])):f("",!0),t("div",ke,[e[19]||(e[19]=t("svg",{class:"w-4 h-4 text-fleet-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",_e," Created "+i(new Date(s.created_at).toLocaleDateString()),1)])]),t("div",Ce,[t("div",Se,[d(u(V),{href:a(o.route("tasks.show",s.id)),class:"text-fleet-success hover:text-fleet-success/80 text-sm font-medium transition-colors"},{default:c(()=>[...e[20]||(e[20]=[C(" View ",-1)])]),_:1},8,["href"]),d(u(V),{href:a(o.route("tasks.edit",s.id)),class:"text-fleet-accent hover:text-fleet-accent-light text-sm font-medium transition-colors"},{default:c(()=>[...e[21]||(e[21]=[C(" Edit ",-1)])]),_:1},8,["href"]),t("button",{onClick:n=>O(s),class:"text-fleet-danger hover:text-red-400 text-sm font-medium transition-colors"}," Delete ",8,De)]),t("div",Te," ID: "+i(s.id),1)])])],32))),128))]),U.value.length===0?(r(),l("div",Me,[e[23]||(e[23]=t("div",{class:"w-24 h-24 bg-fleet-accent/10 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"w-12 h-12 text-fleet-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e[24]||(e[24]=t("h3",{class:"text-xl font-semibold text-fleet-text mb-2"},"No tasks found",-1)),e[25]||(e[25]=t("p",{class:"text-fleet-text-muted mb-6"},"Get started by creating your first task.",-1)),d(u(V),{href:a(o.route("tasks.create")),class:"bg-fleet-accent hover:bg-fleet-accent-light text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:shadow-lg hover:shadow-fleet-accent/25"},{default:c(()=>[...e[22]||(e[22]=[C(" Create Your First Task ",-1)])]),_:1},8,["href"])])):f("",!0),v.tasks.links&&v.tasks.links.length>3?(r(),l("div",Ve,[t("nav",je,[(r(!0),l(T,null,L(v.tasks.links,s=>(r(),l("button",{key:s.label,onClick:n=>z(s.url),disabled:!s.url,innerHTML:s.label,class:M([{"bg-fleet-accent text-white":s.active,"bg-fleet-darker text-fleet-text hover:bg-fleet-accent/10":!s.active,"pointer-events-none opacity-50":!s.url},"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200"])},null,10,Fe))),128))])])):f("",!0)])])]),_:1}),d(Q,{show:y.value,onClose:e[7]||(e[7]=s=>y.value=!1)},{default:c(()=>[t("div",Le,[e[26]||(e[26]=t("h3",{class:"text-xl font-semibold text-fleet-text mb-4"},"Import Tasks (CSV)",-1)),e[27]||(e[27]=t("p",{class:"text-fleet-text-muted text-sm mb-4"},"Upload a CSV with headers: Title, Description, Category, Due Date, Status, Priority.",-1)),t("input",{type:"file",accept:".csv,text/csv",onChange:B,class:"w-full text-fleet-text"},null,32),t("div",$e,[t("button",{onClick:e[6]||(e[6]=s=>y.value=!1),class:"px-4 py-2 bg-fleet-darker border border-fleet-accent/20 text-fleet-text rounded-lg hover:opacity-90"},"Cancel"),t("button",{onClick:P,disabled:u(g).processing||!u(g).csv_file,class:"px-4 py-2 bg-fleet-gradient text-white rounded-lg hover:opacity-90 disabled:opacity-50"},"Import",8,Ue)])])]),_:1},8,["show"])],64))}};export{Ne as default};
