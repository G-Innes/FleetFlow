# Fleet Fox Task Management

Production‚Äëready Laravel 12 + Vue 3 (Inertia) application for managing tasks with categories, due dates, priorities, and CSV import/export. Dark themed UI with Fleet Fox branding. Fully tested with PEST and deployed on Vercel.

## ‚ú® Features
- Authentication (Laravel Breeze)
- Tasks: create, view, edit, delete
- Categories: create, edit, delete (deletion blocked when tasks exist)
- Due dates with ‚Äúdue soon‚Äù highlighting (‚â§ 3 days) and overdue
- Priorities (Low/Medium/High) with visual badges
- Completion toggle (AJAX/Inertia)
- Filtering (category/status/priority/due‚Äësoon) + pagination
- CSV export (with filters) and CSV import (validated mapping)
- Dashboard: stats, Due Soon (limited to 3), Recent Tasks, quick actions
- User isolation: each user only sees their own tasks
- Modern dark UI (Tailwind CSS) with responsive layout

## üß± Tech Stack
- Backend: PHP 8.4, Laravel 12
- Frontend: Vue 3 (Composition API) + Inertia.js, Tailwind CSS 4, Vite
- DB: Neon PostgreSQL (prod), SQLite for tests
- Tests: PEST
- Deploy: Vercel

## üìÇ Repository layout
- `FleetFlow/` ‚Äì application source (Laravel + Inertia/Vue)

## ‚öôÔ∏è Prerequisites
- PHP 8.4+
- Composer
- Node.js 18+ and npm
- SQLite (local quick start) or Postgres/MySQL (optional)

## üöÄ Quick start (local)
```bash
# 1) Backend
cd FleetFlow
cp env.example .env
composer install
php artisan key:generate

# Choose DB:
#  - SQLite (simple): touch database/database.sqlite and set DB_CONNECTION=sqlite
#  - Postgres/MySQL: update DB_* in .env accordingly

php artisan migrate

# 2) Frontend
npm ci

# Dev mode (auto refresh)
npm run dev  # keep this running in one terminal

# 3) Serve Laravel
php artisan serve  # http://localhost:8000
```

### Local environment variables (.env)
Minimum required for local development:
- `APP_NAME="Fleet Fox Task Management"`
- `APP_ENV=local`
- `APP_KEY=base64:...` (generated by `php artisan key:generate`)
- `APP_URL=http://localhost`
- `SESSION_DRIVER=file`
- `QUEUE_CONNECTION=sync`
- For SQLite: `DB_CONNECTION=sqlite`
- For Postgres/MySQL locally: set `DB_CONNECTION`, `DB_HOST`, `DB_PORT`, `DB_DATABASE`, `DB_USERNAME`, `DB_PASSWORD`

## üèóÔ∏è Production build (assets)
```bash
# From FleetFlow/
npm run build-prod  # vite build + copy manifest to public/build/manifest.json
```
If you see missing manifest issues, run the command above (build‚Äëprod copies Vite‚Äôs manifest to the location Laravel expects).

## üåê Deployment (Vercel)
- `vercel.json` sets `buildCommand` to `composer install --no-dev --optimize-autoloader && npm run build-prod`.
- Ensure `APP_URL` is HTTPS to avoid mixed‚Äëcontent in SPA navigation.
- Set environment variables in Vercel (do not commit secrets):
  - `APP_NAME`, `APP_ENV=production`, `APP_KEY`
  - `APP_URL=https://<your-domain>`
  - `DB_CONNECTION=pgsql`, `DB_HOST`, `DB_PORT`, `DB_DATABASE`, `DB_USERNAME`, `DB_PASSWORD`, `DB_SSLMODE=require`
  - `SESSION_DRIVER=cookie`, `CACHE_DRIVER=array`, `QUEUE_CONNECTION=sync`
- Build/Install on Vercel:
  - Install: `npm ci --legacy-peer-deps` (configured)
  - Build: `composer install --no-dev --optimize-autoloader && npm run build-prod`

Mixed‚Äëcontent hardening: client navigation coerces absolute URLs to relative paths for pagination/toggle/export/delete; the app also forces HTTPS in production.

## üß™ Testing (PEST)
```bash
cd FleetFlow
./vendor/bin/pest            # run entire suite
./vendor/bin/pest tests/Pest # run the PEST directory suite
```
- Tests run against an isolated in‚Äëmemory SQLite database (see `phpunit.xml`).
- Coverage: auth, tasks, categories, dashboard stats, model scopes/accessors, CSV import/export.
- See `docs/testing-guide.md` for details, including parallelization, filters, and troubleshooting.

## üì¶ CSV import/export
- Export route: `GET /tasks/export/csv` (respects current filters; streamed CSV)
- Import route: `POST /tasks/import/csv`
- Expected headers (case‚Äësensitive):
  - `Title`, `Description`, `Category`, `Due Date` (e.g., `2025-09-25 14:30`), `Status` (`Completed|Pending`), `Priority` (`Low|Medium|High`)
- Import behavior:
  - Tasks are created for the authenticated user
  - Category is linked by exact name if it already exists; otherwise task is imported without a category (no implicit category creation)

## üîí Security model
- Controllers enforce ownership (`Auth::id()`) for read/write
- Category deletion prevented when any tasks exist under that category
- Validation across forms (required fields, hex color selection, priority bounds, date rules)



## ‚öôÔ∏è Useful NPM scripts
- `npm run dev` ‚Äì Vite dev server
- `npm run build` ‚Äì Production build (raw)
- `npm run build-prod` ‚Äì Production build + copy Vite manifest where Laravel expects it

## üß∞ Troubleshooting
- Missing assets/manifest after deploy:
  - Run `npm run build-prod` locally or ensure Vercel uses the same in `vercel.json`
- Mixed content errors (HTTP on HTTPS site):
  - Verify `APP_URL=https://...` and redeploy; the client also uses relative URLs for SPA links
- Clear caches:
  - `php artisan config:clear && php artisan view:clear`

## üìú License
Educational/demo project for a homework assignment.
